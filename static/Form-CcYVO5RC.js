import{_ as C}from"./SvgIcon.vue_vue_type_style_index_0_lang-drNrwqs7.js";import{d as k,h as d,o as _,c as f,F as B,r as U,e as V,z as T,a as e,u as p,A as h,B as $,C as m,D as F}from"./index-TE7jLlbu.js";const M={class:"uploader__wrapper"},P=["onClick"],z=["src"],A={type:"file",ref:"file",accept:"image/*",style:{display:"none"}},D=e("span",null,"上传图片",-1),E=k({__name:"UploaderImg",props:["modelValue"],emits:["update:modelValue"],setup(x,{emit:c}){const r=x,u=c,t=d(r.modelValue||[]);function g(){u("update:modelValue",t.value)}function s(o){window.wx.previewImage({current:o,urls:t.value})}function w(){window.wx&&window.wx.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:o=>{l(o.localIds)}})}async function l(o){const n=[];for(let a=0;a<o.length;a+=1){const i=o[a];n.push(y(i))}Promise.all(n).then(a=>{const i=a.filter(v=>!!v);t.value.push(...i),g()}).catch(()=>{console.log("上传失败")})}function y(o){return new Promise(async n=>{window.wx.uploadImage({localId:o,isShowProgressTips:0,success:()=>{n("")},fail:()=>{console.log("uploadImage Error: storage to weixin"),n("")}})})}function I(o){t.value.splice(o,1),g()}return(o,n)=>{const a=C;return _(),f("ul",M,[(_(!0),f(B,null,U(p(t),(i,v)=>(_(),f("li",{onClick:b=>s(i)},[V(a,{"icon-name":"trash",class:"icon-delete",onClick:T(b=>I(v),["stop"])},null,8,["onClick"]),e("img",{src:i},null,8,z)],8,P))),256)),e("li",{class:"uploader__upload",onClick:n[0]||(n[0]=i=>w())},[e("input",A,null,512),V(a,{"icon-name":"add",class:"icon-upload"}),D])])}}}),L={class:"wrap-card"},N={class:"form"},S=e("option",{value:"",disabled:""},"请选择分类",-1),j=e("option",{value:"闲置"},"闲置",-1),R=e("option",{value:"其它"},"其它",-1),q=[S,j,R],G=e("button",{class:"btn btn-primary btn-block btn-lg"},"发布",-1),K=k({__name:"Form",setup(x){const c=d(""),r=d(""),u=d(""),t=d(["/static/demo.jpg"]);return(g,s)=>{const w=E;return _(),f("div",L,[e("div",N,[h(e("input",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=l=>m(c)?c.value=l:null),placeholder:"请输入标题"},null,512),[[$,p(c)]]),h(e("select",{class:"form-control","onUpdate:modelValue":s[1]||(s[1]=l=>m(r)?r.value=l:null),placeholder:"请选择分类"},q,512),[[F,p(r)]]),h(e("textarea",{class:"form-control","onUpdate:modelValue":s[2]||(s[2]=l=>m(u)?u.value=l:null),placeholder:"请输入描述信息",rows:"10"},null,512),[[$,p(u)]]),V(w,{modelValue:p(t),"onUpdate:modelValue":s[3]||(s[3]=l=>m(t)?t.value=l:null)},null,8,["modelValue"]),G])])}}});export{K as default};
